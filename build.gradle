import org.apache.tools.ant.filters.ReplaceTokens;

buildscript {
  repositories {
    jcenter()
  }
  dependencies {
    classpath 'com.github.jengelman.gradle.plugins:shadow:4.0.4'
  }
}

plugins {
	id 'java'
	id 'com.github.johnrengelman.shadow' version '4.0.4'
	id 'org.spongepowered.plugin' version '0.9.0'
}


version = '4.0.0'

// In this section you declare where to find the dependencies of your project
repositories {
	maven {
		url "https://hub.spigotmc.org/nexus/content/repositories/snapshots"
	}
	maven {
		url = 'https://repo.spongepowered.org/maven'
    }
    maven { url = "https://oss.sonatype.org/content/repositories/snapshots" }
    mavenCentral()
	maven { 
    	url 'https://jitpack.io' 
 	}
}


sponge {
    plugin {
        id = 'dynamicgui'
        meta {
			name = 'DynamicGui'
		}
    }
}

processResources {
	from(sourceSets.main.resources) {
		include 'plugin.yml'
		filter(ReplaceTokens, tokens: ['VERSION' : project.version])
	}
}

shadowJar {
	relocate 'ninja.leaping.configurate', 'com.clubobsidian.dynamicgui.shaded.configurate'
	relocate 'com.google.common', 'com.clubobsidian.dynamicgui.shaded.guava'
	relocate 'com.google.gson', 'com.clubobsidian.dynamicgui.shaded.gson'
	relocate 'org.yaml.snakeyaml', 'com.clubobsidian.dynamicgui.shaded.snakeyaml'
	relocate 'com.clubobsidian.trident', 'com.clubobsidian.dynamicgui.shaded.trident'
	baseName = 'DynamicGui'
	classifier = ''
}

dependencies {
    testImplementation 'junit:junit:4.12'
    
    //Server implementations
    
    compileOnly 'org.spigotmc:spigot-api:1.8.8-R0.1-SNAPSHOT'
    compileOnly 'net.md-5:bungeecord-api:1.8-SNAPSHOT'
    compileOnly('org.spongepowered:spongevanilla:1.12.2-7.1.5'){
    	exclude group: 'org.spongepowered', module: 'testmods'
    }
    compile 'org.apache.commons:commons-lang3:3.9'
    compile 'commons-io:commons-io:2.6'
    compile 'com.github.clubobsidian:wrappy:1.8.0'
    compile 'com.github.clubobsidian:trident:2.0.1'
    compile 'com.github.clubobsidian:dynamicguiparser:2.4.1'
    compile 'com.udojava:EvalEx:2.1'
    compile 'com.github.ClubObsidian:FuzzUtil:1.1.0'
    compile 'com.google.inject:guice:4.2.3'
}